{% extends 'edx/base.html' %}
{% load compress %}
{% load staticfiles %}
{% load i18n %}
{% block title %}{% trans "Credit Checkout" %}{% endblock title %}

{% block content %}
    <div class="container credit-checkout">
        <div class="course-details well">
            <div class="row center-block ">
                <h4 class="header-title title">
                    {% blocktrans count hours=credit_seats.0.attr.credit_hours %}
                        You are purchasing 1 credit hour for:
                    {% plural %}
                        You are purchasing {{ hours }} credit hours for:
                    {% endblocktrans %}
                    <span id="course-name" data-course_key="{{ course }}" data-username="{{ request.user }}"
                          class="course-title text-nowrap">{{ course.name }}</span>
                </h4>
                <div class="col-sm-4">
                    <div class="advantages">
                        <strong>{% trans "You deserved it." %}</strong>
                        <p>
                            {% trans "The hard work is over; you passed the course. Now get the credit you deserve to start or complete a degree." %}
                        </p>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="advantages">
                        <strong>{% trans "It's affordable." %}</strong>
                        <p>
                            {% trans "The credit offered on edX is generally lower than for-credit courses on campus." %}
                        </p>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="advantages">
                        <strong>{% trans "It opens doors." %}</strong>
                        <p>
                            {% trans "It is estimated that most job openings by 2018 will require a college degree. Start your path to success." %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="provider-container">
            <div class="alert alert-danger error-message hide" role="alert">
                {% trans "Something went wrong! Please try again later." %}
            </div>
            <div class="provider-panel hide">
                <div data-providers-ids="{{ providers_ids }}" class="row center-block provider-details">
                    {# data will be loaded with underscore template #}
                </div>

                <div class="row center-block eligibility-details">
                    <div class="col-sm-3"></div>
                    <div class="col-sm-9 date">
                        {# date will be added with ajax call #}
                        {% blocktrans with date='<span class="deadline-date"></span>' %}
                            Credit eligibility expires on {{ date }}
                        {% endblocktrans %}
                    <span class="price pull-right">
                        {% trans "Price" %}: ${{ credit_seats.0.stockrecords.first.price_excl_tax }}
                    </span>
                    </div>
                </div>

                <div class="row center-block text-right total-price">
                    <div class="col-sm-12">{% trans "Total:" %} ${{ credit_seats.0.stockrecords.first.price_excl_tax }}</div>
                </div>

                <div id="payment-buttons" class="row center-block checkout-controls">
                    {% for processor_name, button_text in payment_processors.items %}
                        <div class="col-xs-6 ">
                            <button data-track-type="click"
                                    data-track-event="edx.bi.ecommerce.credit.payment_selected"
                                    data-track-category="{{ processor_name }}"
                                    data-processor-name="{{ processor_name }}"
                                    data-sku="{{ credit_seats.0.stockrecords.first.partner_sku }}"
                                    data-course-id="{{ course.id }}"
                                    class="btn btn-primary payment-button"
                            >
                                {{ button_text }}
                            </button>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <form id="payment-processor-form">
    </form>

    <script type="text/template" id="provider-details-tpl">
        {% include "edx/credit/provider-details.underscore" %}
    </script>

    <script>
        var lmsRootUrl = "{{ lms_url_root }}";
    </script>

    {% if analytics_data %}
        <script type="text/javascript">
            var initModelData = {{ analytics_data|safe }};
        </script>
    {% endif %}

{% endblock content %}

{% block javascript %}
    <script src="{% static 'js/pages/credit_checkout.js' %}"></script>
{% endblock %}
